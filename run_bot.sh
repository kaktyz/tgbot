#!/bin/bash

# Скрипт для запуска телеграм-бота

echo "Загрузка переменных окружения из файла .env..."
if [ -f .env ]; then
    export $(grep -v '^#' .env | xargs)
else
    echo "Файл .env не найден. Пожалуйста, создайте его на основе .env.example"
    exit 1
fi

echo "Проверка наличия необходимых переменных окружения..."

if [ -z "$BOT_TOKEN" ]; then
    echo "Ошибка: Не установлена переменная окружения BOT_TOKEN"
    echo "Пожалуйста, установите токен бота из BotFather в файле .env"
    exit 1
fi

if [ -z "$CHAT_ID" ]; then
    echo "Ошибка: Не установлена переменная окружения CHAT_ID"
    echo "Пожалуйста, установите ID чата, в котором должен работать бот, в файле .env"
    exit 1
fi

echo "Переменные окружения загружены и проверены. Запуск бота..."

# Запуск бота
cargo run

echo "Бот завершил работу"